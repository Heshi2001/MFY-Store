{% load custom_filters %}

{% if results %}
  <div class="divide-y divide-gray-100">
    {% for product in results %}
      <div 
        class="suggestion-item flex items-center gap-3 p-3 cursor-pointer hover:bg-green-50 transition-colors"
        data-name="{{ product.name }}"
        data-url="{{ product.get_absolute_url }}"
      >
        <!-- Product Image -->
        <div class="w-10 h-10 rounded-md overflow-hidden border border-gray-200 flex-shrink-0">
          {% if product.first_image %}
            <img src="{{ product.first_image.url }}" alt="{{ product.name }}" class="w-full h-full object-cover">
          {% else %}
            <div class="w-full h-full flex items-center justify-center bg-gray-100 text-gray-400 text-sm">No Img</div>
          {% endif %}
        </div>

        <!-- Product Info -->
        <div class="flex-1 min-w-0">
          <div class="font-medium text-gray-800 truncate">
            {{ product.name|highlight:query|safe }}
          </div>
          <div class="text-sm text-gray-500 truncate">
            {{ product.category.name }}
          </div>
        </div>

        <i class="fas fa-search text-gray-400"></i>
      </div>
    {% endfor %}
  </div>
{% else %}
  <div class="p-3 text-gray-500 text-sm text-center">No products found</div>
{% endif %}
